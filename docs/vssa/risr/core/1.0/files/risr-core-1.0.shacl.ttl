@prefix sh:       <http://www.w3.org/ns/shacl#> .
@prefix risr:     <https://data.gov.lt/datasets/gov/vssa/risr/core/1.0/> .
@prefix risr-api: <https://data.gov.lt/datasets/gov/vssa/risr/core/1.0/api/> .
@prefix skos:     <http://www.w3.org/2004/02/skos/core#> .
@prefix rdf:      <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:     <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:      <http://www.w3.org/2001/XMLSchema#> .

risr:EntityShape
  a sh:NodeShape ;
  sh:targetClass risr:Entity ;
  rdfs:label "Entity constraints"@en, "Esinio apribojimai"@lt ;

  sh:property [
    sh:path risr:_id ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:pattern "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$" ;
    sh:message "_id must be a UUID string (1..1)."@en ;
    sh:message "_id turi būti UUID formato eilutė (1..1)."@lt ;
  ] ;

  sh:property [
    sh:path risr:_revision ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "_revision is required (1..1)."@en ;
    sh:message "_revision privalomas (1..1)."@lt ;
  ] ;

  sh:property [
    sh:path risr:_txn ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "_txn is required (1..1)."@en ;
    sh:message "_txn privalomas (1..1)."@lt ;
  ] ;

  sh:property [
    sh:path risr:_created ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
    sh:message "_created must be xsd:dateTime (0..1)."@en ;
    sh:message "_created turi būti xsd:dateTime (0..1)."@lt ;
  ] ;

  sh:property [
    sh:path risr:_updated ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
    sh:message "_updated must be xsd:dateTime (0..1)."@en ;
    sh:message "_updated turi būti xsd:dateTime (0..1)."@lt ;
  ] ;

  sh:property [
    sh:path risr:_label ;
    sh:nodeKind sh:Literal ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
    sh:message "_label must be a literal (0..1)."@en ;
    sh:message "_label turi būti literalas (0..1)."@lt ;
  ] .

risr:EnumShape
  a sh:NodeShape ;
  sh:targetClass risr:Enum ;
  rdfs:label "Enumeration constraints"@en, "Enumeracijos apribojimai"@lt ;

  sh:property [
    sh:path risr:code ;
    sh:nodeKind sh:Literal ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "Enum must have exactly one business key (risr:code) (1..1)."@en ;
    sh:message "Enum privalo turėti tik vieną verslo raktą (risr:code) (1..1)."@lt ;
  ] ;

  sh:property [
    sh:path skos:prefLabel ;
    sh:datatype rdf:langString ;
    sh:minCount 1 ;
    sh:message "Enum must have at least one skos:prefLabel with a language tag."@en ;
    sh:message "Enum privalo turėti bent vieną skos:prefLabel su kalbos žyma."@lt ;
  ] .

risr:EnumItemShape
  a sh:NodeShape ;
  sh:targetClass risr:EnumItem ;
  rdfs:label "Enumeration item constraints"@en, "Enumeracijos reikšmės apribojimai"@lt ;

  sh:property [
    sh:path risr:code ;
    sh:nodeKind sh:Literal ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "EnumItem must have exactly one business key (risr:code) (1..1)."@en ;
    sh:message "EnumItem privalo turėti tik vieną verslo raktą (risr:code) (1..1)."@lt ;
  ] ;

  sh:property [
    sh:path risr:inEnum ;
    sh:class risr:Enum ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "EnumItem must belong to exactly one Enum via risr:inEnum (1..1)."@en ;
    sh:message "EnumItem privalo priklausyti tik vienai Enum per risr:inEnum (1..1)."@lt ;
  ] ;

  sh:property [
    sh:path skos:prefLabel ;
    sh:datatype rdf:langString ;
    sh:minCount 1 ;
    sh:message "EnumItem must have at least one skos:prefLabel with a language tag."@en ;
    sh:message "EnumItem privalo turėti bent vieną skos:prefLabel su kalbos žyma."@lt ;
  ] ;

  sh:property [
    sh:path skos:definition ;
    sh:datatype rdf:langString ;
    sh:minCount 0 ;
    sh:message "If provided, skos:definition must be language-tagged."@en ;
    sh:message "Jei pateikta, skos:definition turi būti su kalbos žyma."@lt ;
  ] ;

  sh:property [
    sh:path skos:broader ;
    sh:class skos:Concept ;
    sh:minCount 0 ;
    sh:message "If provided, skos:broader must point to a skos:Concept."@en ;
    sh:message "Jei pateikta, skos:broader turi rodyti į skos:Concept."@lt ;
  ] .

risr-api:ResponseContainerShape
  a sh:NodeShape ;
  sh:targetClass risr-api:ResponseContainer ;
  rdfs:label "API response container constraints"@en, "API atsako konteinerio apribojimai"@lt ;

  sh:property [
    sh:path risr-api:_data ;
    sh:nodeKind sh:IRIOrLiteral ;
    sh:minCount 0 ;
    sh:message "_data contains response resources (0..n)."@en ;
    sh:message "_data talpina atsako resursus (0..n)."@lt ;
  ] ;

  sh:property [
    sh:path risr-api:_cid ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
    sh:message "_cid must be a string (0..1)."@en ;
    sh:message "_cid turi būti eilutė (0..1)."@lt ;
  ] .
